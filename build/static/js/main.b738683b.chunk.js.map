{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","FilterField","_ref","value","handler","react_default","a","createElement","onChange","PersonForm","_ref2","onSubmit","personValue","numberValue","personHandler","numberHandler","type","Persons","_ref3","peopleToShow","deleteFunction","map","person","App_Person","key","name","Person","_ref4","number","onClick","Notification","_ref5","message","className","ErrorMessage","_ref6","error","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","setError","useEffect","personsService","toLowerCase","includes","App_Notification","App_ErrorMessage","App_FilterField","event","target","App_PersonForm","preventDefault","personObject","window","confirm","oldPerson","find","n","personlist","setTimeout","catch","App_Persons","removeName","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b738683b.chunk.js","sourcesContent":["import axios from 'axios'\n// const baseUrl = 'http://localhost:3001/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst FilterField = ({value, handler }) => {\n  return (\n    <div>\n      filter shown with\n      <input value={value}\n      onChange={handler}\n      />\n    </div>\n  )\n}\n\nconst PersonForm = ({onSubmit, personValue, numberValue, personHandler, numberHandler}) => {\n  return(\n    <form onSubmit={onSubmit}>\n    <div>\n      name: <input \n      value={personValue} \n      onChange={personHandler}\n      />\n    </div>\n    <div>\n      number: <input\n      value={numberValue}\n      onChange={numberHandler}\n      />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst Persons = ({ peopleToShow, deleteFunction }) => {\n  return(\n    <div>\n      {peopleToShow.map(person => <Person key={person.name} person={person} deleteFunction={deleteFunction} />)}\n    </div>\n  )\n}\n\nconst Person = ({ person, deleteFunction }) => {\n  return(\n    <div key={person.id}>\n      {person.name} {person.number}\n      <button onClick={() => deleteFunction(person.id)}>delete</button>\n    </div>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className='notification'>\n      {message}\n    </div>\n  )\n}\n\nconst ErrorMessage = ({ error }) => {\n  if (error === null) {\n    return null\n  }\n  return (\n    <div className='error'>\n      {error}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ error, setError ] = useState(null)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    if (persons.map(person => person.name).includes(newName)) {\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        const oldPerson = persons.find(n => n.name === newName);\n        personsService\n          .update(oldPerson.id, personObject)\n          .then(response => {\n            setPersons(persons.map(personlist => (personlist.id !== oldPerson.id ? personlist : response)))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`Changed the number for person ${newName}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setError(`Information on ${newName} has already been removed from the server`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setPersons(persons.filter(person => person.name !== newName));\n          })\n        }\n    } else {\n      personsService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Added person ${newName}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n        })\n        .catch(error => {\n          setError(`${error.response.data.error}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n  }, [])\n\n  const removePerson = (id) => {\n    const removeName = persons.find(n => n.id === id);\n    if (window.confirm(`Delete ${removeName.name} ?`)) { \n    personsService\n      .deletePerson(id)\n      .then(response => {\n        setPersons(persons.filter(person => person.id !== id))\n        setMessage(`Removed person ${removeName.name}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n      })\n      .catch(error => {\n        setError(`Person ${removeName.name} has already been removed from the server`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.name !== removeName.name));\n      })\n    }\n  }\n\n  const peopleToShow = filter === '' ? \n    persons : persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  const handleChangePerson = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleChangeNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleChangeFilter = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <ErrorMessage error={error} />\n      <FilterField value={filter} handler={handleChangeFilter} />\n      <h3>add a new</h3>\n      <PersonForm onSubmit={addPerson} personValue={newName} numberValue={newNumber} personHandler={handleChangePerson} numberHandler={handleChangeNumber} />\n      <h3>Numbers</h3>\n      <Persons peopleToShow={peopleToShow} deleteFunction={removePerson}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}